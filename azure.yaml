# Azure Developer CLI configuration for devShop application
# This template deploys a two-tier application with:
# - Frontend: Windows Server VM with IIS hosting ASP.NET application
# - Backend: Windows Server VM with SQL Server 2022 pre-installed

name: devshop-azure
metadata:
  template: devshop-azure@0.0.1-beta

# Note: This deployment uses Azure VMs via Bicep templates
# No services block needed as deployment is handled entirely through infrastructure

# Hooks for automated configuration
hooks:
  postprovision:
    windows:
      shell: pwsh
      run: ./scripts/configure-vms.ps1
      continueOnError: false
    posix:
      shell: sh
      run: pwsh ./scripts/configure-vms.ps1
  
  predeploy:
    windows:
      shell: pwsh
      run: ./scripts/pre-deploy.ps1
      continueOnError: false
    posix:
      shell: sh
      run: pwsh ./scripts/pre-deploy.ps1
